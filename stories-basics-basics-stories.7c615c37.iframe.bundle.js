"use strict";(self.webpackChunk_nosferatu500_react_sortable_tree=self.webpackChunk_nosferatu500_react_sortable_tree||[]).push([[446],{"./src/stories/basics/basics.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AddAndRemoveNodesProgrammatically:()=>AddAndRemoveNodesProgrammatically,Callbacks:()=>basics_stories_Callbacks,MinimalImplementation:()=>MinimalImplementation,ModifyNodes:()=>basics_stories_ModifyNodes,PreventDrop:()=>PreventDrop,RowDirectionSupport:()=>RowDirectionSupport,Search:()=>basics_stories_Search,Themes:()=>basics_stories_Themes,TreeDataImportExport:()=>TreeDataImportExport,VirtuosoProperties:()=>VirtuosoProperties,__namedExportsOrder:()=>__namedExportsOrder,default:()=>basics_stories});var react=__webpack_require__("./node_modules/react/index.js"),src=__webpack_require__("./src/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const firstNames=["Abraham","Adam","Agnar","Albert","Albin","Albrecht","Alexander","Alfred","Alvar","Ander","Andrea","Arthur","Axel","Bengt","Bernhard","Carl","Daniel","Einar","Elmer","Eric","Erik","Gerhard","Gunnar","Gustaf","Harald","Herbert","Herman","Johan","John","Karl","Leif","Leonard","Martin","Matt","Mikael","Nikla","Norman","Oliver","Olof","Olvir","Otto","Patrik","Peter","Petter","Robert","Rupert","Sigurd","Simon"],AddRemove=()=>{const[treeData,setTreeData]=(0,react.useState)([{title:"Peter Olofsson"},{title:"Karl Johansson"}]),[addAsFirstChild,setAddAsFirstChild]=(0,react.useState)(!1),getNodeKey=({treeIndex})=>treeIndex,getRandomName=()=>firstNames[Math.floor(Math.random()*firstNames.length)];return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:{height:300,width:700},children:(0,jsx_runtime.jsx)(src.XF,{treeData,onChange:setTreeData,generateNodeProps:({node,path})=>({buttons:[(0,jsx_runtime.jsx)("button",{onClick:()=>{setTreeData((0,src.wQ)({treeData,parentKey:path[path.length-1],expandParent:!0,getNodeKey,newNode:{title:`${getRandomName()} ${node.title.split(" ")[0]}sson`},addAsFirstChild}).treeData)},children:"Add Child"}),(0,jsx_runtime.jsx)("button",{onClick:()=>{setTreeData((0,src.XY)({treeData,path,getNodeKey}))},children:"Remove"})]})})}),(0,jsx_runtime.jsx)("button",{onClick:()=>{setTreeData(treeData.concat({title:`${getRandomName()} ${getRandomName()}sson`}))},children:"Add more"}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsxs)("label",{htmlFor:"addAsFirstChild",children:["Add new child node at start",(0,jsx_runtime.jsx)("input",{name:"addAsFirstChild",type:"checkbox",checked:addAsFirstChild,onChange:()=>{setAddAsFirstChild((value=>!value))}})]})]})};AddRemove.displayName="AddRemove";const add_remove=AddRemove;try{addremove.displayName="addremove",addremove.__docgenInfo={description:"",displayName:"addremove",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/basics/add-remove.tsx#addremove"]={docgenInfo:addremove.__docgenInfo,name:"addremove",path:"src/stories/basics/add-remove.tsx#addremove"})}catch(__react_docgen_typescript_loader_error){}const data=[{title:"Chicken",expanded:!0,children:[{title:"Egg"}]}],Barebones=()=>{const[treeData,setTreeData]=(0,react.useState)(data);return(0,jsx_runtime.jsx)("div",{style:{height:300,width:700},children:(0,jsx_runtime.jsx)(src.XF,{treeData,onChange:setTreeData})})};Barebones.displayName="Barebones";const basics_barebones=Barebones;try{barebones.displayName="barebones",barebones.__docgenInfo={description:"",displayName:"barebones",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/basics/barebones.tsx#barebones"]={docgenInfo:barebones.__docgenInfo,name:"barebones",path:"src/stories/basics/barebones.tsx#barebones"})}catch(__react_docgen_typescript_loader_error){}const Callbacks=()=>{const[treeData,setTreeData]=(0,react.useState)([{title:"A",expanded:!0,children:[{title:"B"}]},{title:"C"}]),[lastMovePrevPath,setLlastMovePrevPath]=(0,react.useState)(null),[lastMoveNextPath,setLastMoveNextPath]=(0,react.useState)(null),[lastMoveNode,setLastMoveNode]=(0,react.useState)(null),recordCall=(name,args)=>{console.log(`${name} called with arguments:`,args)};return(0,jsx_runtime.jsxs)("div",{children:["Open your console to see callback parameter info",(0,jsx_runtime.jsx)("div",{style:{height:300,width:700},children:(0,jsx_runtime.jsx)(src.XF,{treeData,onChange:setTreeData,getNodeKey:({node})=>`node${node.title}`,onVisibilityToggle:args=>recordCall("onVisibilityToggle",args),onMoveNode:args=>{recordCall("onMoveNode",args);const{prevPath,nextPath,node}=args;setLlastMovePrevPath(prevPath),setLastMoveNextPath(nextPath),setLastMoveNode(node)},onDragStateChanged:args=>recordCall("onDragStateChanged",args)})}),lastMoveNode&&(0,jsx_runtime.jsxs)("div",{children:['Node "',lastMoveNode.title,'" moved from path [',lastMovePrevPath.join(","),"] to path [",lastMoveNextPath.join(","),"]."]})]})};Callbacks.displayName="Callbacks";const basics_callbacks=Callbacks;try{callbacks.displayName="callbacks",callbacks.__docgenInfo={description:"",displayName:"callbacks",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/basics/callbacks.tsx#callbacks"]={docgenInfo:callbacks.__docgenInfo,name:"callbacks",path:"src/stories/basics/callbacks.tsx#callbacks"})}catch(__react_docgen_typescript_loader_error){}const can_drop_data=[{id:"trap",title:"Wicked witch",subtitle:"Traps people",expanded:!0,children:[{id:"trapped",title:"Trapped"}]},{id:"no-grandkids",title:"Jeannie",subtitle:"Doesn't allow grandchildren",expanded:!0,children:[{id:"jimmy",title:"Jimmy"}]},{id:"twin-1",title:"Twin #1",isTwin:!0,subtitle:"Doesn't play with other twin"},{id:"twin-2",title:"Twin #2",isTwin:!0,subtitle:"Doesn't play with other twin"}],CanDrop=()=>{const[treeData,setTreeData]=(0,react.useState)(can_drop_data);return(0,jsx_runtime.jsx)("div",{style:{height:300,width:700},children:(0,jsx_runtime.jsx)(src.XF,{treeData,canDrop:({node,nextParent,prevPath,nextPath})=>{if(prevPath.indexOf("trap")>=0&&nextPath.indexOf("trap")<0)return!1;if(node.isTwin&&nextParent&&nextParent.isTwin)return!1;const noGrandkidsDepth=nextPath.indexOf("no-grandkids");return!(noGrandkidsDepth>=0&&nextPath.length-noGrandkidsDepth>2)},getNodeKey:({node})=>node.id,onChange:setTreeData})})};CanDrop.displayName="CanDrop";const can_drop=CanDrop;try{candrop.displayName="candrop",candrop.__docgenInfo={description:"",displayName:"candrop",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/basics/can-drop.tsx#candrop"]={docgenInfo:candrop.__docgenInfo,name:"candrop",path:"src/stories/basics/can-drop.tsx#candrop"})}catch(__react_docgen_typescript_loader_error){}const modify_nodes_data=[{name:"IT Manager"},{name:"Regional Manager",expanded:!0,children:[{name:"Branch Manager"}]}],ModifyNodes=()=>{const[treeData,setTreeData]=(0,react.useState)(modify_nodes_data),getNodeKey=({treeIndex})=>treeIndex;return(0,jsx_runtime.jsx)("div",{style:{height:300,width:700},children:(0,jsx_runtime.jsx)(src.XF,{treeData,onChange:setTreeData,generateNodeProps:({node,path})=>({title:(0,jsx_runtime.jsx)("input",{style:{fontSize:"1.1rem"},value:node.name,onChange:event=>{const name=event.target.value;setTreeData((0,src.rc)({treeData,path,getNodeKey,newNode:{...node,name}}))}})})})})};ModifyNodes.displayName="ModifyNodes";const modify_nodes=ModifyNodes;try{modifynodes.displayName="modifynodes",modifynodes.__docgenInfo={description:"",displayName:"modifynodes",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/basics/modify-nodes.tsx#modifynodes"]={docgenInfo:modifynodes.__docgenInfo,name:"modifynodes",path:"src/stories/basics/modify-nodes.tsx#modifynodes"})}catch(__react_docgen_typescript_loader_error){}const rtl_support_data=[{title:"Chicken",expanded:!0,children:[{title:"Egg"},{title:"Egg"},{title:"Egg"},{title:"Egg"},{title:"Egg"},{title:"Egg"}]}],RTLSupport=()=>{const[treeData,setTreeData]=(0,react.useState)(rtl_support_data);return(0,jsx_runtime.jsx)("div",{style:{height:300,width:700},children:(0,jsx_runtime.jsx)(src.XF,{rowDirection:"rtl",treeData,onChange:setTreeData})})};RTLSupport.displayName="RTLSupport";const rtl_support=RTLSupport;try{rtlsupport.displayName="rtlsupport",rtlsupport.__docgenInfo={description:"",displayName:"rtlsupport",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/basics/rtl-support.tsx#rtlsupport"]={docgenInfo:rtlsupport.__docgenInfo,name:"rtlsupport",path:"src/stories/basics/rtl-support.tsx#rtlsupport"})}catch(__react_docgen_typescript_loader_error){}const Search=()=>{const getStack=(left,hasNeedle=!1)=>0===left?hasNeedle?{title:"Needle"}:{title:"Hay"}:{title:"Hay",children:[{title:"Hay",children:[getStack(left-1,hasNeedle&&left%2),{title:"Hay"}]},{title:"Hay"},{title:"Hay",children:[{title:"Hay"},getStack(left-1,hasNeedle&&(left+1)%2)]}]},[searchString,setSearchString]=(0,react.useState)(""),[searchFocusIndex,setSearchFocusIndex]=(0,react.useState)(0),[searchFoundCount,setSearchFoundCount]=(0,react.useState)(0),[treeData,setTreeData]=(0,react.useState)([{title:"Haystack",children:[getStack(3,!0),getStack(3),{title:"Hay"},getStack(2,!0)]}]);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h2",{children:"Find the needle!"}),(0,jsx_runtime.jsxs)("form",{style:{display:"inline-block"},onSubmit:event=>{event.preventDefault()},children:[(0,jsx_runtime.jsx)("input",{id:"find-box",type:"text",placeholder:"Search...",style:{fontSize:"1rem"},value:searchString,onChange:event=>setSearchString(event.target.value)}),(0,jsx_runtime.jsx)("button",{type:"button",disabled:!searchFoundCount,onClick:()=>setSearchFocusIndex(null!==searchFocusIndex?(searchFoundCount+searchFocusIndex-1)%searchFoundCount:searchFoundCount-1),children:"<"}),(0,jsx_runtime.jsx)("button",{type:"submit",disabled:!searchFoundCount,onClick:()=>setSearchFocusIndex(null!==searchFocusIndex?(searchFocusIndex+1)%searchFoundCount:0),children:">"}),(0,jsx_runtime.jsxs)("span",{children:[" ",searchFoundCount>0?searchFocusIndex+1:0," / ",searchFoundCount||0]})]}),(0,jsx_runtime.jsx)("div",{style:{height:300,width:700},children:(0,jsx_runtime.jsx)(src.XF,{treeData,onChange:setTreeData,searchMethod:({node,searchQuery})=>searchQuery&&node.title.toLowerCase().indexOf(searchQuery.toLowerCase())>-1,searchQuery:searchString,searchFocusOffset:searchFocusIndex,searchFinishCallback:matches=>{setSearchFoundCount(matches.length),setSearchFocusIndex(matches.length>0?searchFocusIndex%matches.length:0)}})})]})};Search.displayName="Search";const basics_search=Search;try{search.displayName="search",search.__docgenInfo={description:"",displayName:"search",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/basics/search.tsx#search"]={docgenInfo:search.__docgenInfo,name:"search",path:"src/stories/basics/search.tsx#search"})}catch(__react_docgen_typescript_loader_error){}const themes_data=[{title:"The file explorer theme",expanded:!0,children:[{title:"Imported from @nosferatu500/theme-file-explorer",expanded:!0,children:[{title:(0,jsx_runtime.jsxs)("div",{children:["Find it on"," ",(0,jsx_runtime.jsx)("a",{href:"https://www.npmjs.com/package/@nosferatu500/theme-file-explorer",children:"npm"})]})}]}]},{title:"More compact than the default"},{title:(0,jsx_runtime.jsxs)("div",{children:["Simply set it to the ",(0,jsx_runtime.jsx)("code",{children:"theme"})," prop and you’re done!"]})}],Themes=()=>{const[treeData,setTreeData]=(0,react.useState)(themes_data);return(0,jsx_runtime.jsx)("div",{style:{height:300,width:700},children:(0,jsx_runtime.jsx)(src.XF,{treeData,onChange:setTreeData})})};Themes.displayName="Themes";const basics_themes=Themes;try{themes.displayName="themes",themes.__docgenInfo={description:"",displayName:"themes",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/basics/themes.tsx#themes"]={docgenInfo:themes.__docgenInfo,name:"themes",path:"src/stories/basics/themes.tsx#themes"})}catch(__react_docgen_typescript_loader_error){}const initialData=[{id:"1",name:"N1",parent:null},{id:"2",name:"N2",parent:null},{id:"3",name:"N3",parent:2},{id:"4",name:"N4",parent:3}],TreeDataIO=()=>{const[treeData,setTreeData]=(0,react.useState)((0,src.O)({flatData:initialData.map((node=>({...node,title:node.name}))),getKey:node=>node.id,getParentKey:node=>node.parent,rootKey:null})),flatData=(0,src.kz)({treeData,getNodeKey:({node})=>node.id,ignoreCollapsed:!1}).map((({node,path})=>({id:node.id,name:node.name,parent:path.length>1?path[path.length-2]:null})));return(0,jsx_runtime.jsxs)("div",{children:["↓treeData for this tree was generated from flat data similar to DB rows↓",(0,jsx_runtime.jsx)("div",{style:{height:300,width:700},children:(0,jsx_runtime.jsx)(src.XF,{treeData,onChange:setTreeData})}),(0,jsx_runtime.jsx)("hr",{}),"↓This flat data is generated from the modified tree data↓",(0,jsx_runtime.jsx)("ul",{children:flatData.map((({id,name,parent})=>(0,jsx_runtime.jsxs)("li",{children:["id: ",id,", name: ",name,", parent: ",parent||"null"]},id)))})]})};TreeDataIO.displayName="TreeDataIO";const tree_data_io=TreeDataIO;try{treedataio.displayName="treedataio",treedataio.__docgenInfo={description:"",displayName:"treedataio",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/basics/tree-data-io.tsx#treedataio"]={docgenInfo:treedataio.__docgenInfo,name:"treedataio",path:"src/stories/basics/tree-data-io.tsx#treedataio"})}catch(__react_docgen_typescript_loader_error){}const virtuoso_props_data=[{title:"Chicken",expanded:!0,children:[{title:"Egg"},{title:"Egg"},{title:"Egg"},{title:"Egg"},{title:"Egg"},{title:"Egg"},{title:"Egg"}]}],VirtuosoProps=()=>{const[treeData,setTreeData]=(0,react.useState)(virtuoso_props_data),[isScrolling,setIsScrolling]=(0,react.useState)(!1),[scrollTop,setScrollTop]=(0,react.useState)(0),virtuosoRef=react.createRef();return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:{height:300,width:700},children:(0,jsx_runtime.jsx)(src.XF,{treeData,onChange:setTreeData,virtuosoRef,virtuosoProps:{isScrolling:scrollingState=>{virtuosoRef?.current&&virtuosoRef?.current.getState((virtuosoState=>{setIsScrolling(scrollingState),setScrollTop(virtuosoState.scrollTop)}))}}})}),(0,jsx_runtime.jsx)("hr",{}),"Current scrollTop:"," ",isScrolling?"...":scrollTop]})};VirtuosoProps.displayName="VirtuosoProps";const virtuoso_props=VirtuosoProps;try{virtuosoprops.displayName="virtuosoprops",virtuosoprops.__docgenInfo={description:"",displayName:"virtuosoprops",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/basics/virtuoso-props.tsx#virtuosoprops"]={docgenInfo:virtuosoprops.__docgenInfo,name:"virtuosoprops",path:"src/stories/basics/virtuoso-props.tsx#virtuosoprops"})}catch(__react_docgen_typescript_loader_error){}const basics_stories={title:"Basics",component:basics_barebones},MinimalImplementation={render:()=>(0,jsx_runtime.jsx)(basics_barebones,{})},TreeDataImportExport={render:()=>(0,jsx_runtime.jsx)(tree_data_io,{})},AddAndRemoveNodesProgrammatically={render:()=>(0,jsx_runtime.jsx)(add_remove,{})},basics_stories_ModifyNodes={render:()=>(0,jsx_runtime.jsx)(modify_nodes,{})},PreventDrop={render:()=>(0,jsx_runtime.jsx)(can_drop,{})},basics_stories_Search={render:()=>(0,jsx_runtime.jsx)(basics_search,{})},basics_stories_Themes={render:()=>(0,jsx_runtime.jsx)(basics_themes,{})},basics_stories_Callbacks={render:()=>(0,jsx_runtime.jsx)(basics_callbacks,{})},RowDirectionSupport={render:()=>(0,jsx_runtime.jsx)(rtl_support,{})},VirtuosoProperties={render:()=>(0,jsx_runtime.jsx)(virtuoso_props,{})};MinimalImplementation.parameters={...MinimalImplementation.parameters,docs:{...MinimalImplementation.parameters?.docs,source:{originalSource:"{\n  render: () => <BarebonesExample />\n}",...MinimalImplementation.parameters?.docs?.source}}},TreeDataImportExport.parameters={...TreeDataImportExport.parameters,docs:{...TreeDataImportExport.parameters?.docs,source:{originalSource:"{\n  render: () => <TreeDataIOExample />\n}",...TreeDataImportExport.parameters?.docs?.source}}},AddAndRemoveNodesProgrammatically.parameters={...AddAndRemoveNodesProgrammatically.parameters,docs:{...AddAndRemoveNodesProgrammatically.parameters?.docs,source:{originalSource:"{\n  render: () => <AddRemoveExample />\n}",...AddAndRemoveNodesProgrammatically.parameters?.docs?.source}}},basics_stories_ModifyNodes.parameters={...basics_stories_ModifyNodes.parameters,docs:{...basics_stories_ModifyNodes.parameters?.docs,source:{originalSource:"{\n  render: () => <ModifyNodesExample />\n}",...basics_stories_ModifyNodes.parameters?.docs?.source}}},PreventDrop.parameters={...PreventDrop.parameters,docs:{...PreventDrop.parameters?.docs,source:{originalSource:"{\n  render: () => <CanDropExample />\n}",...PreventDrop.parameters?.docs?.source}}},basics_stories_Search.parameters={...basics_stories_Search.parameters,docs:{...basics_stories_Search.parameters?.docs,source:{originalSource:"{\n  render: () => <SearchExample />\n}",...basics_stories_Search.parameters?.docs?.source}}},basics_stories_Themes.parameters={...basics_stories_Themes.parameters,docs:{...basics_stories_Themes.parameters?.docs,source:{originalSource:"{\n  render: () => <ThemesExample />\n}",...basics_stories_Themes.parameters?.docs?.source}}},basics_stories_Callbacks.parameters={...basics_stories_Callbacks.parameters,docs:{...basics_stories_Callbacks.parameters?.docs,source:{originalSource:"{\n  render: () => <CallbacksExample />\n}",...basics_stories_Callbacks.parameters?.docs?.source}}},RowDirectionSupport.parameters={...RowDirectionSupport.parameters,docs:{...RowDirectionSupport.parameters?.docs,source:{originalSource:"{\n  render: () => <RowDirectionExample />\n}",...RowDirectionSupport.parameters?.docs?.source}}},VirtuosoProperties.parameters={...VirtuosoProperties.parameters,docs:{...VirtuosoProperties.parameters?.docs,source:{originalSource:"{\n  render: () => <VirtuosoPropsExample />\n}",...VirtuosoProperties.parameters?.docs?.source}}};const __namedExportsOrder=["MinimalImplementation","TreeDataImportExport","AddAndRemoveNodesProgrammatically","ModifyNodes","PreventDrop","Search","Themes","Callbacks","RowDirectionSupport","VirtuosoProperties"]}}]);